# Superheroes

Веб-сайт для управління героями. Користувач може переглядати, додавати, редагувати та видаляти героїв, а також керувати їх зображеннями.

## Технології

- React
- NestJS
- Sequelize + PostgreSQL
- Material UI
- Axios

## Інструкція зі встановлення і запуску

### 1. Клонувати репозиторій

```bash
git clone https://github.com/korlak/superhero
cd superhero
```
### 2. Встановити залежності
```bash
cd server
npm install
```
```bash
cd client
npm install
```
### 3. Налаштування БД
- Встановити [PostgreSQL](https://sbp.enterprisedb.com/getfile.jsp?fileid=1259563)
- Створити БД
- Створити .env в server та налаштувати .env файл
- В client package.json замінити `"proxy": "http://localhost:5005"` на ваш порт
#### Приклад .env:
```bash
PORT=3001
POSTGRES_HOST=localhost
POSTGRES_USER=postgres
POSTGRES_DB=superHeroes
POSTGRES_PASSWORD=root
POSTGRES_PORT=5432
```
### 4. Запустити сервер та клієнт
```bash
cd server
npm run start:dev
```
```bash
cd client
npm start
```

## Реалізований функціонал
### Backend:
Бекенд написано з використанням NestJS та Sequelize. Дані зберігаються у PostgreSQL.

### Основні функції:
- CRUD операції з героями.
- Завантаження/видалення зображень для кожного героя.
- Зберігання зображень у локальних папках відповідно до імені героя.
- Обробка multipart/form-data при створенні та оновленні героїв.

### Робота із зображеннями:
- Зображення зберігаються у директорії server/dist/src/static/id/image.jpg.
- Доступ до зображень забезпечено через статичний хостинг (Nest ServeStaticModule).
- Для завантаження нових зображень використовується FormData.
- Завантажувати можна тільки зоображеня, на інші файли я перевірка

| METHOD | URL |DESCRIPTION|
|--------|-----|----------|
|GET|http://localhost:3001/heroes|Отримання всіх героїв|
|GET|http://localhost:3001/heroes/id|Отримання героя за id|
|GET|http://localhost:3001/heroes/id/img.jpg|Отримання img з папки героя|
|POST|http://localhost:3001/heroes/add|Додати нового героя (FormData)|
|PATCH|http://localhost:3001/heroes/id|Оновити дані існуючого героя|
|DELETE|http://localhost:3001/heroes/id|Видалити героя|
|POST|http://localhost:3001/heroes/50/image/add|Додати img до існуючого героя|
|PATCH|http://localhost:3001/heroes/50/image/del|Видалити img у існуючого героя|

### Frontend:

#### Реалізований функціонал
- Перегляд списку всіх героїв (ім'я + перша картинка)
- Перегляд детальної інформації про героя (всі поля + галерея)
- Детальніший перегляд картинки
- Створення нового героя з зображеннями
- Редагування існуючого героя (текст + додавання нових зображень)
- Додавання картинок до існуючого героя
- Видалення героя або окремих зображень
- Валідовані форми
- Пагінація

На головній сторінці у кожної карточки з героєм, крім ім'я і зображення, також є 3 кнопки:
- Перегляд: перехід на сторінку героя
- Редагування: перехід на форму редагування
- Видалення: видалення героя одним натисканням

В `<Header />` є 2 посилання: перехід на головну, додавання героя.<br>
На сторінці героя (`<HeroPage />`) можна переглянути всю інформацію та галерея. <b>Cаме на цій сторінці можна видаляти та додавати картинки до існуючого героя.</b> Для додавання є кнопка під всією інформацією, для видалення потрібно натиснути на детальний огляд картинки і натиснути кнопку "Delete"<br><br>
<b>Сторінка додавання/редагування</b> поєднані в один компонент `<HeroForm />` через `useParams()` визначається користувач чи перейшов на форму редагування або додавання.<br>
<b>Форма додавання:</b> 6 полей для додавання інформації, останнє поле для додавання картинок(можна вибрати декілька файлів).<br>
<b>Форма редагування:</b>5 полей для редагування, картинки можна тільки переглянути.

#### Маршрути:
| URL | COMPONENT | DESCRIPTION|
|-|-|-|
|/|`<MainPage/>`|Головна сторінка зі списком героїв|
|/heroes/:id|`<HeroPage/>`|	Деталі конкретного героя|
|/hero/addHero|`<HeroForm/>`|	Додавання нового героя|
|/hero/editHero/:id|`<HeroForm/>`|	Редагування героя|

## Що треба доопрацювати?
1. Додати unit-тести.
2. Додати Swager для беку.
3. Додати кнопки видалення і додавання зображень також на форму редагування.
4. Видалення папок зображень неіснуючих героїв (Якщо герой видалений з БД, його папка залишається).
5. Покращити UX при завантаженні зображень (показати лоадер, прев’ю, обмежити розмір).
6. Опціонально додати pipes та guard, ролі ADMIN, USER і т.д.
7. Валідація даних в формі
